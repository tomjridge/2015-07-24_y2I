# processing file 'exec_adhoc_remove-int.trace' ...
        # processing file 'adhoc_remove-int.trace' ...
        @type trace
        ###########################################
        # Testing removing files and directories
        ###########################################

        # create dirs with various permissions and
        # a file and dir inside it
     9: mkdir "/tmp_dir_rwx/" 0o777
    10: Tau
    11: RV_none
    12: open_close "/tmp_dir_rwx/file.txt" [O_CREAT;O_RDWR] 0o666
    13: Tau
    14: RV_none
    15: mkdir "/tmp_dir_rwx/subdir" 0o777
    16: Tau
    17: RV_none
    18: chmod "/tmp_dir_rwx/" 0o700
    19: Tau
    20: RV_none

    22: mkdir "/tmp_dir_rwt/" 0o777
    23: Tau
    24: RV_none
    25: open_close "/tmp_dir_rwt/file.txt" [O_CREAT;O_RDWR] 0o666
    26: Tau
    27: RV_none
    28: mkdir "/tmp_dir_rwt/subdir" 0o777
    29: Tau
    30: RV_none
    31: chmod "/tmp_dir_rwt/" 0o1700
    32: Tau
    33: RV_none

    35: mkdir "/tmp_dir_rw/" 0o777
    36: Tau
    37: RV_none
    38: open_close "/tmp_dir_rw/file.txt" [O_CREAT;O_RDWR] 0o666
    39: Tau
    40: RV_none
    41: mkdir "/tmp_dir_rw/subdir" 0o777
    42: Tau
    43: RV_none
    44: chmod "/tmp_dir_rw/" 0o600
    45: Tau
    46: RV_none

    48: mkdir "/tmp_dir_rx/" 0o777
    49: Tau
    50: RV_none
    51: open_close "/tmp_dir_rx/file.txt" [O_CREAT;O_RDWR] 0o666
    52: Tau
    53: RV_none
    54: mkdir "/tmp_dir_rx/subdir" 0o777
    55: Tau
    56: RV_none
    57: chmod "/tmp_dir_rx/" 0o500
    58: Tau
    59: RV_none

    61: mkdir "/tmp_dir_r/" 0o777
    62: Tau
    63: RV_none
    64: open_close "/tmp_dir_r/file.txt" [O_CREAT;O_RDWR] 0o666
    65: Tau
    66: RV_none
    67: mkdir "/tmp_dir_r/subdir" 0o777
    68: Tau
    69: RV_none
    70: chmod "/tmp_dir_r/" 0o400
    71: Tau
    72: RV_none

    74: mkdir "/tmp_dir_wx/" 0o777
    75: Tau
    76: RV_none
    77: open_close "/tmp_dir_wx/file.txt" [O_CREAT;O_RDWR] 0o666
    78: Tau
    79: RV_none
    80: mkdir "/tmp_dir_wx/subdir" 0o777
    81: Tau
    82: RV_none
    83: chmod "/tmp_dir_wx/" 0o300
    84: Tau
    85: RV_none

    87: mkdir "/tmp_dir_w/" 0o777
    88: Tau
    89: RV_none
    90: open_close "/tmp_dir_w/file.txt" [O_CREAT;O_RDWR] 0o666
    91: Tau
    92: RV_none
    93: mkdir "/tmp_dir_w/subdir" 0o777
    94: Tau
    95: RV_none
    96: chmod "/tmp_dir_w/" 0o200
    97: Tau
    98: RV_none

   100: mkdir "/tmp_dir_wt/" 0o777
   101: Tau
   102: RV_none
   103: open_close "/tmp_dir_wt/file.txt" [O_CREAT;O_RDWR] 0o666
   104: Tau
   105: RV_none
   106: mkdir "/tmp_dir_wt/subdir" 0o777
   107: Tau
   108: RV_none
   109: chmod "/tmp_dir_wt/" 0o1300
   110: Tau
   111: RV_none

   113: mkdir "/tmp_dir_rwx/" 0o777
   114: Tau
   115: EEXIST
   116: open_close "/tmp_dir_rwx/file.txt" [O_CREAT;O_RDWR] 0o666
   117: Tau
   118: RV_none
   119: mkdir "/tmp_dir_rwx/subdir" 0o777
   120: Tau
   121: EEXIST
   122: chmod "/tmp_dir_x/" 0o100
   123: Tau
   124: ENOENT

   126: mkdir "/tmp_dir_/" 0o777
   127: Tau
   128: RV_none
   129: open_close "/tmp_dir_/file.txt" [O_CREAT;O_RDWR] 0o666
   130: Tau
   131: RV_none
   132: mkdir "/tmp_dir_/subdir" 0o666
   133: Tau
   134: RV_none
   135: chmod "/tmp_dir_/" 0o000
   136: Tau
   137: RV_none


        # trying to delete the file
   141: unlink "/tmp_dir_rwx/file.txt"
   142: Tau
   143: RV_none
   144: unlink "/tmp_dir_rwt/file.txt"
   145: Tau
   146: RV_none
   147: unlink "/tmp_dir_rw/file.txt"
   148: Tau
   149: RV_none
   150: unlink "/tmp_dir_rx/file.txt"
   151: Tau
   152: RV_none
   153: unlink "/tmp_dir_r/file.txt"
   154: Tau
   155: RV_none
   156: unlink "/tmp_dir_wx/file.txt"
   157: Tau
   158: RV_none
   159: unlink "/tmp_dir_wt/file.txt"
   160: Tau
   161: RV_none
   162: unlink "/tmp_dir_w/file.txt"
   163: Tau
   164: RV_none
   165: unlink "/tmp_dir_x/file.txt"
   166: Tau
   167: ENOENT
   168: unlink "/tmp_dir_/file.txt"
   169: Tau
   170: RV_none

        # trying to delete the dir
   173: rmdir "/tmp_dir_rwx/subdir"
   174: Tau
   175: RV_none
   176: rmdir "/tmp_dir_rwt/subdir"
   177: Tau
   178: RV_none
   179: rmdir "/tmp_dir_rw/subdir"
   180: Tau
   181: RV_none
   182: rmdir "/tmp_dir_rx/subdir"
   183: Tau
   184: RV_none
   185: rmdir "/tmp_dir_r/subdir"
   186: Tau
   187: RV_none
   188: rmdir "/tmp_dir_wx/subdir"
   189: Tau
   190: RV_none
   191: rmdir "/tmp_dir_wt/subdir"
   192: Tau
   193: RV_none
   194: rmdir "/tmp_dir_w/subdir"
   195: Tau
   196: RV_none
   197: rmdir "/tmp_dir_x/subdir"
   198: Tau
   199: ENOENT
   200: rmdir "/tmp_dir_/subdir"
   201: Tau
   202: RV_none

   204: dump-result "/"
           "/"|D|32643
           "/tmp_dir_"|D|32653
           "/tmp_dir_r"|D|32645
           "/tmp_dir_rw"|D|97922
           "/tmp_dir_rwt"|D|65284
           "/tmp_dir_rwx"|D|32644
           "/tmp_dir_rx"|D|97924
           "/tmp_dir_w"|D|32649
           "/tmp_dir_wt"|D|32651
           "/tmp_dir_wx"|D|32647
        end dump-result



# trace accepted
